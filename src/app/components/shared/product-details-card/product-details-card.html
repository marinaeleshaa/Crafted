<main
  class="relative grid grid-cols-1 md:grid-cols-12 min-h-[90vh] gap-0 overflow-hidden items-stretch"
>
  <!-- LEFT PANEL -->
  <div
    class="md:col-span-6 xl:col-span-4 flex flex-col py-8 px-6 lg:px-8 order-2 md:order-1 gap-0 justify-between"
  >
    <!-- Name block -->
    <div class="flex items-start justify-between gap-3">
      <div class="space-y-1">
        <h1
          class="text-4xl md:text-5xl xl:text-6xl font-title font-bold capitalize tracking-tight leading-none"
        >
          {{ product().name }}
        </h1>
      </div>
      <app-button variant="icon" size="lg" class="mt-1 shrink-0">
        <lucide-icon [img]="HeartIcon" class="w-6 h-6"></lucide-icon>
      </app-button>
    </div>

    <!-- Divider -->
    <div class="w-full h-px bg-secondary/60 my-5"></div>

    <!-- Size selector -->
    <div class="space-y-3">
      <div class="flex items-center justify-between">
        <p class="text-xs uppercase tracking-[0.35em] text-foreground/40 font-semibold">Size</p>
        <app-button variant="link" size="xs" class="underline underline-offset-2 opacity-70"
          >Size Guide</app-button
        >
      </div>
      <div class="flex flex-wrap items-center gap-2">
        @for (size of product().sizes; track $index) {
          <div
            class="w-11 h-11 rounded-xl cursor-pointer bg-secondary text-secondary-foreground flex items-center justify-center text-sm font-bold hover:bg-pop hover:text-pop-foreground transition-all duration-200 hover:scale-105"
          >
            {{ size }}
          </div>
        }
      </div>
    </div>

    <!-- Color selector -->
    <div class="space-y-3 mt-5">
      <p class="text-xs uppercase tracking-[0.35em] text-foreground/40 font-semibold">Color</p>
      <div class="flex items-center gap-3">
        @for (color of product().colors; track $index) {
          <div
            class="relative w-9 h-9 rounded-full cursor-pointer ring-2 ring-transparent hover:ring-pop ring-offset-2 ring-offset-background transition-all duration-200 hover:scale-110"
            [ngClass]="'bg-' + color"
          ></div>
        }
      </div>
    </div>

    <!-- MIDDLE: Price card -->
    <div
      class="relative mt-5 rounded-2xl bg-secondary/50 border border-secondary px-5 py-4 flex items-center justify-between overflow-hidden"
    >
      <!-- decorative stripe -->
      <div class="absolute left-0 top-0 h-full w-1 bg-pop rounded-l-2xl"></div>
      <div class="pl-2">
        <p class="text-xs uppercase tracking-[0.3em] text-foreground/40 mb-0.5">Price</p>
        <div class="flex items-start leading-none gap-0.5">
          <span class="text-base font-bold text-foreground/50 mt-1">$</span>
          <span class="text-5xl font-extrabold text-secondary-foreground tracking-tighter">{{
            product().price
          }}</span>
        </div>
      </div>
      <div class="text-right pr-1">
        <p class="text-xs uppercase tracking-[0.3em] text-foreground/40 mb-1">Rating</p>
        <div class="flex items-center gap-1 justify-end">
          <span class="text-pop text-sm">★★★★★</span>
        </div>
        <p class="text-xs text-foreground/30 mt-0.5">248 reviews</p>
      </div>
    </div>

    <!-- Spacer -->
    <div class="flex-1"></div>

    <!-- CTA Buttons -->
    <div class="flex flex-col gap-2 mt-6">
      <app-button size="lg" width="full">
        <lucide-angular [img]="CartIcon"></lucide-angular>
        Add to Cart
      </app-button>
      <app-button variant="secondary" size="lg" width="full">
        <lucide-angular [img]="EditIcon"></lucide-angular>
        Make It Yours
      </app-button>
    </div>
  </div>

  <!-- CENTER: Hero Image — sized by siblings on md+, min-h on mobile -->
  <div
    class="md:col-span-6 xl:col-span-5 order-1 md:order-2 relative min-h-[80vw] md:min-h-0 py-8 px-4"
  >
    <!-- Glow -->
    <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
      <div class="w-[70%] h-[70%] rounded-full bg-primary/10 blur-[80px]"></div>
    </div>

    <!-- Image is absolutely positioned so it never drives the column height -->
    <div class="absolute inset-8 z-10 flex items-center justify-center">
      <img
        class="w-full h-full object-cover md:object-contain drop-shadow-2xl"
        [src]="product().imageUrl"
        alt="product 3d view"
      />
    </div>

    <!-- Floating label -->
    <div
      class="absolute bottom-5 left-1/2 -translate-x-1/2 z-20 bg-background/80 backdrop-blur-sm border border-secondary rounded-full px-5 py-2 flex items-center gap-2 whitespace-nowrap"
    >
      <span class="w-2 h-2 rounded-full bg-primary animate-pulse inline-block"></span>
      <span class="text-xs font-medium tracking-widest uppercase text-foreground/60"
        >360° View</span
      >
    </div>
  </div>

  <!-- RIGHT PANEL -->
  <div
    class="md:col-span-12 lg:col-span-10 xl:col-span-3 flex flex-col justify-between py-8 px-6 lg:px-6 order-3 gap-6"
  >
    <!-- Gallery thumbnails -->
    <div class="space-y-2">
      <p class="text-xs uppercase tracking-[0.35em] text-foreground/40 font-semibold">Gallery</p>
      <div class="flex flex-row gap-2 flex-wrap">
        @for (img of product().gallery; track $index) {
          <img
            [src]="img"
            alt="thumbnail"
            class="w-16 h-16 lg:h-20 rounded-xl object-cover cursor-pointer shrink-0 opacity-50 hover:opacity-100 ring-2 ring-transparent hover:ring-pop transition-all duration-200 hover:scale-105"
          />
        }
      </div>
    </div>

    <!-- Description -->
    <div class="space-y-2">
      <h3 class="text-xs uppercase tracking-[0.35em] text-foreground/40 font-semibold">About</h3>
      <p class="text-sm text-foreground/65 leading-relaxed">
        {{ product().description }}
      </p>
    </div>

    <!-- Details table -->
    <div class="space-y-2 flex-1">
      <h3 class="text-xs uppercase tracking-[0.35em] text-foreground/40 font-semibold">Details</h3>
      <table class="w-full text-sm">
        @for (item of product().details; track $index) {
          <tr class="border-b border-secondary h-9">
            <td class="pr-3 text-foreground/40 capitalize font-medium text-xs">{{ item.title }}</td>
            <td class="text-foreground/75 text-xs">{{ item.description }}</td>
          </tr>
        }
      </table>
    </div>
  </div>
</main>
