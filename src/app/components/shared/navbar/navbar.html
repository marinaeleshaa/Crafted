<nav class="fixed w-full bg-background z-50 backdrop-blur-2xl py-2">
  <div class="flex justify-between items-center px-2 sm:px-0 sm:w-(--myWidth) mx-auto">
    <div class="flex items-center justify-between md:gap-4 grow md:grow-0">
      <!-- Logo -->
      <div class="flex items-center gap-6">
        <a routerLink="/" class="flex items-center gap-2">
          <img src="/logos.png" alt="Logo" class="w-8 h-8 shrink-0" />
          <span class="text-xl hidden sm:inline font-bold capitalize myTransition"> crafted </span>
        </a>
      </div>

      <div class="flex items-center gap-2">
        <!-- search input -->
        <div class="relative bg-pop/10 rounded-full dropdown-wrapper">
          <input
            type="text"
            placeholder="Search..."
            class="rounded-full md:w-sm px-10 py-2 placeholder:text-foreground/80 focus:outline-none focus:ring-2 focus:ring-pop"
          />

          <button class="absolute right-2 top-1/2 transform -translate-y-1/2">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6 text-pop"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
              />
            </svg>
          </button>

          <button
            class="absolute left-2 top-1/2 transform -translate-y-1/2"
            (click)="toggleDropdown($event)"
          >
            <lucide-icon
              [name]="icon"
              class="w-6 h-6 text-pop cursor-pointer myTransition"
            ></lucide-icon>
          </button>

          <!-- Search Dropdown -->
          @if (dropdownOpen) {
            <app-dropdown
              [items]="[
                { label: 'Phone Cover', href: '/' },
                { label: 't-shirts', href: '/' },
                { label: 'mugs', href: '/' },
              ]"
            ></app-dropdown>
          }
        </div>

        <!-- mode toggle -->
        <app-mode-toggle class="md:hidden" [text]="false"></app-mode-toggle>
      </div>
    </div>

    <div class="hidden md:flex items-center gap-3">
      <!-- Auth Buttons -->
      @if (isAuthenticated$ | async) {
        <!-- fav -->
        <app-button variant="icon" extraClasses="flex items-center">
          <lucide-icon [img]="Heart" class="size-(--md-icon)"></lucide-icon>
        </app-button>
        <!-- cart -->
        <app-button variant="icon" extraClasses="flex items-center">
          <lucide-icon [img]="Cart" class="size-(--md-icon)"></lucide-icon>
        </app-button>
        <!-- user -->
        <div class="relative dropdown-wrapper">
          <app-button
            (click)="toggleProfileMenu($event)"
            variant="icon"
            extraClasses="flex items-center "
          >
            <lucide-icon [img]="User" class="border rounded-full size-(--md-icon)"></lucide-icon>
          </app-button>
          <!-- profile Dropdown -->
          @if (profileMenuOpen) {
            <app-dropdown
              [items]="[
                { label: 'Profile', href: '/profile' },
                { label: 'Orders History', href: '/' },
                { label: 'My Designs Studio', href: '/' },
              ]"
              width="w-fit"
              align="right"
            >
              <li class="group px-4 py-3 transition-all duration-200">
                <app-mode-toggle></app-mode-toggle>
              </li>
              <li class="group px-2 py-3 transition-all duration-200">
                <app-button (click)="logout()" variant="ghost" width="full">Sign me out</app-button>
              </li>
            </app-dropdown>
          }
        </div>
      } @else {
        <div class="flex items-center gap-2">
          <app-button routerLink="/login" variant="primary" size="sm">Login</app-button>
          <app-button routerLink="/signup" variant="outline" size="sm">Sign Up</app-button>
          <app-mode-toggle [text]="false"></app-mode-toggle>
        </div>
      }
    </div>
  </div>
</nav>
